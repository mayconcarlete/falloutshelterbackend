version: 2.1


jobs:
  unit-test:
    machine: true
    #image: docker/base-tests.Dockerfile
    steps:
      - checkout
      - run:
          name: creating .env
          command: |
            echo "MONGO_URL=${MONGO_URL}" > .env
            echo "MONGO_PORT=${MONGO_PORT}" > .env
            echo "MONGO_MANAGER_PORT=${MONGO_MANAGER_PORT}" > .env
      - run:
          name: printando envs
          command: |
            printenv
      - run:
          name: Unit Tests
          command: | 
            make unit-test  

workflows:
  version: 2
  build_and_tests:
    jobs:
    - unit-test